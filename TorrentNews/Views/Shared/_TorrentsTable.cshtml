@using TorrentNews.Extensions
@model IEnumerable<TorrentNews.Models.TorrentModel>

<table id="moviesTable">
@*    <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
*@
@foreach (var t in Model)
{
    <tr>
        <td class="posterCell">
            <a href="@Url.Action("Details", new { id = t.Id })" target="_blank">
                @if (!string.IsNullOrEmpty(t.Poster))
                {
                    <img class="poster" src="@t.Poster"/>
                }
                else
                {
                    <img class="poster" src="/Images/noimage-poster.png"/>
                }
            </a>
        </td>
        <td class="scoreCell">
            <div style="position: relative;">
                <div class="score">@t.Score</div>
                @if (t.ImdbAward)
                {
                    <span class="hasTooltip"><img src="/Images/imdb_logo_24.png"/></span>
                    <div class="hidden tooltip tooltipAwards">
                        <img src="/Images/imdb_logo_24.png" />
                        <p class="awardsTitle">IMDB award</p>
                        <p>Movies with more than 1000 votes and a rating of 7 or higher are awarded with the IMDB logo and 400 points.</p>
                    </div>
                }

                @if (t.MetacriticAward)
                {
                    <span class="hasTooltip"><img src="/Images/metacritic_logo_24.png"/></span>
                    <div class="hidden tooltip tooltipAwards">
                        <img src="/Images/metacritic_logo_24.png" />
                        <p class="awardsTitle">Metacritic award</p>
                        <p>Movies with a metascore of 70 or higher are awarded with the Metacritic logo and 500 points.</p>
                    </div>
                }

                @if (t.PopularityAward || t.SuperPopularityAward)
                {
                    <span class="hasTooltip"><img src="/Images/fire_24.png"/></span>
                    <div class="hidden tooltip tooltipAwards">
                        <img src="/Images/fire_24.png" />
                        <p class="awardsTitle">Popularity award</p>
                        <p>Torrents with more than 1000 seeds or more than 20 comments are awarded with the Popularity logo and 100 points. If seeds are higher than 3000 or comments higher than 100, the score is increased by 100 extra points.</p>
                    </div>
                }
            </div>
        </td>
        <td class="movieInfoCell">
            @Html.Partial("_MovieInfo", t)
        </td>
        <td class="torrentInfoCell">
            <div class="torrentInfoCellWrapper">
                @Html.Partial("_TorrentInfo", t)

                @if (t.RelatedTorrents.Any())
                {
                    @Html.Partial("_RelatedTorrentsList", t)
                }
            </div>

            <div class="torrentInfoCellButtonsContainer">
                
                <a href="@Url.Action("Details", "Torrents", new { id = t.Id })" target="_blank">
                    <img class="detailsButton" src="/Images/tnews_32.png"/>
                </a>
                
                <button class="trailerButton normal" 
                    data-trailer-url="/Torrents/Trailer?title=@Url.Encode(t.MovieTitle)&year=@Url.Encode(t.Year)">
                </button>
            </div>
        </td>
    </tr>
}
</table>
