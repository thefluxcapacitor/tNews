@using TorrentNews.Extensions
@model IEnumerable<TorrentNews.Models.TorrentModel>

<table id="moviesTable">
@*    <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
*@
@foreach (var t in Model)
{
    <tr>
        <td class="posterCell">
            <a href="@Url.Action("Details", new { id = t.Id })" target="_blank">
                @if (!string.IsNullOrEmpty(t.Poster))
                {
                    <img class="poster" src="@t.Poster"/>
                }
                else
                {
                    <img class="poster" src="/Images/noimage-poster.png"/>
                }
            </a>
        </td>
        <td class="scoreCell">
            <div style="position: relative;">
                <div class="score">@t.Score</div>
                @if (t.ImdbAward)
                {
                    <span class="hasTooltip"><img src="/Images/imdb_logo_24.png"/></span>
                    <div class="hidden tooltip tooltipAwards">IMDB award: movies with more than 1000 votes and an IMDB rating higher than 7 are awarded with the IMDB logo and 400 points.</div>
                }

                @if (t.MetacriticAward)
                {
                    <span><img src="/Images/metacritic_logo_24.png"/></span>
                }

                @if (t.PopularityAward || t.SuperPopularityAward)
                {
                    <span><img src="/Images/kickass_logo_24.png"/></span>
                }
            </div>
        </td>
        <td class="movieInfoCell">
            @Html.Partial("_MovieInfo", t)
        </td>
        <td class="torrentInfoCell">
            <div class="torrentInfoCellWrapper">
                @Html.Partial("_TorrentInfo", t)

                @if (t.RelatedTorrents.Any())
                {
                    @Html.Partial("_RelatedTorrentsList", t)
                }
            </div>

            <div class="torrentInfoCellButtonsContainer">
                
                <a href="@Url.Action("Details", "Torrents", new { id = t.Id })" target="_blank">
                    <img class="detailsButton" src="/Images/tnews_32.png"/>
                </a>
                
                <button class="trailerButton normal" 
                    data-trailer-url="/Torrents/Trailer?title=@Url.Encode(t.MovieTitle)&year=@Url.Encode(t.Year)">
                </button>
            </div>
        </td>
    </tr>
}
</table>
